<!DOCTYPE html>
<html>

<head>
    <title>handsontable demo</title>
    <link rel="stylesheet" media="screen" href="dist/handsontable.full.min.css">
    <script src="dist/handsontable.full.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="dist/chart.min.js"></script>
</head>

<body>
    <div id="container"></div>
    <div id="chartTypeList">
    	<button data-prop="bar" onclick="draw('bar')">柱状图</button>
    	<button data-prop="line" onclick="draw('line')">线状图</button>
    </div>
    <div id="event_logger"></div>

    <canvas id="myChart" width="400" height="400"></canvas>

    <script type="text/javascript">
    var $$ = function(el){
    	return document.getElementById(el);
    }

    var T = function(){
    	this.initConfig();
    	this.bindData();

    	this.bindEvent();
    } 

    T.prototype.initConfig = function(){
    	//todo binding data
    	var _this = this;
    	this.data = data =  [
	      ['', 'Tesla', 'Mazda', 'Mercedes', 'Mini', 'Mitsubishi','AA', 'BB', 'CC', 'DD', 'EE'],
	      ['2017', 0, 2941, 4303, 354, 5814,2, 2422, 5399, 776, 4151],
	      ['2018', 3, 2905, 2867, 412, 5284,0, 2941, 4303, 354, 5814],
	      ['2019', 4, 2517, 4822, 552, 6127,3, 2905, 2867, 412, 5284],
	      ['2020', 2, 2422, 5399, 776, 4151,4, 2517, 4822, 552, 6127]
	    ];

         this.container = $$("container");
         this.event_logger = $$("event_logger");

         this.config = {
         		data: data,
		    minRows: 5,
		    minCols: 6,
		    minSpareRows: 1,
		    autoWrapRow: true,
		    colHeaders: true,
		    contextMenu: true
         }

         this.preHookList = ["afterSelection"];

         this.preHookList.forEach(function(hook){
	  	_this.config[hook] = function(){
	  		log_events(hook, arguments);
	  	}
	  });
    }

    T.prototype.bindData = function(){
    	var _this = this;
    	 this.hstable = new Handsontable(_this.container,_this.config);
    }

    T.prototype.bindEvent = function(){
    	
    }

   var myT = new T();
  
    
  var start = (new Date()).getTime();
  var i = 0;
  var timer;
  var event_logger = document.getElementById("event_logger");

  var selectionArea = [];

  function log_events(event, data){
  	selectionArea =  [[parseInt(data[0]), parseInt(data[1])], [parseInt(data[2]), parseInt(data[3])]];
  }

  // function log_events(event, data) {
  //   // if (document.getElementById('check_' + event).checked) {
  //     var now = (new Date()).getTime(),
  //       diff = now - start,
  //       vals, str, div, text;

  //     vals = [
  //       i,
  //         "@" + numbro(diff / 1000).format('0.000'),
  //         "[" + event + "]"
  //     ];

  //     vals2 = [];
  //     for (var d = 0; d < data.length; d++) {
  //       try {
  //         str = JSON.stringify(data[d]);
  //       }
  //       catch (e) {
  //         str = data[d].toString(); // JSON.stringify breaks on circular reference to a HTML node
  //       }

  //       if (str === void 0) {
  //         continue;
  //       }

  //       if (str.length > 20) {
  //         str = Object.prototype.toString.call(data[d]);
  //       }
  //       if (d < data.length - 1) {
  //         // str += ',';
  //       }
  //       vals.push(str);
  //       vals2.push(str);
  //     }

  //     if (window.console) {
  //       // console.log(i,
  //       //     "@" + numbro(diff / 1000).format('0.000'),
  //       //     "[" + event + "]",
  //       //   data);
  //     }
  //     div = document.createElement("DIV");
  //     text = document.createTextNode(vals.join(" "));

  //     div.appendChild(text);
  //     event_logger.appendChild(div);

  //     selectionArea = [[vals2[0], vals2[1]], [vals2[2], vals2[3]]];
  //     console.log("==selectionArea==", selectionArea);

  //     clearTimeout(timer);
  //     timer = setTimeout(function() {
  //       event_logger.scrollTop = event_logger.scrollHeight;
  //     }, 10);

  //     // i++;
  //   // }
  // }

  function draw(type){

  }
   </script>


    <script>
var ctx = document.getElementById("myChart").getContext('2d');
var myChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
        datasets: [{
            label: '# of Votes',
            data: [12, 19, 3, 5, 2, 3],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255,99,132,1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        },
        {
            label: '# of Votes',
            data: [2, 9, 13, 15, 22, 13],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255,99,132,1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
        }
    }
});
</script>
</body>

</html>